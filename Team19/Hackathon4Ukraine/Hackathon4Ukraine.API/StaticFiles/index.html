<!DOCTYPE html>
<html lang="en">
<head>

    <!-- SITE TITTLE -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GIVE BACK</title>
    
    <!-- PLUGINS CSS STYLE -->
    <!-- <link href="plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet"> -->
    <!-- Bootstrap -->
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap-slider.css">
    <!-- Font Awesome -->
    <link href="plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- Owl Carousel -->
    <link href="plugins/slick-carousel/slick/slick.css" rel="stylesheet">
    <link href="plugins/slick-carousel/slick/slick-theme.css" rel="stylesheet">
    <!-- Fancy Box -->
    <link href="plugins/fancybox/jquery.fancybox.pack.css" rel="stylesheet">
    <link href="plugins/jquery-nice-select/css/nice-select.css" rel="stylesheet">
    <!-- CUSTOM CSS -->
    <link href="css/style.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
</head>

<body class="body-wrapper">


<section>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <nav class="navbar navbar-expand-lg navbar-light navigation">
                    <a class="navbar-brand" href="index.html">
                        <img src="images/give_back_logo.png" 
						width="350"
						height="70"
						alt="">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent"
                            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
  
                        <ul class="navbar-nav ml-auto mt-10">
                            <li class="nav-item">
                                <a class="login-button" href="404.html">Login</a>
                            </li>
                            <li class="nav-item p-1">
                                <a href="index.html"><img
                                        src="https://flagcdn.com/16x12/ua.png"
                                        srcset="https://flagcdn.com/32x24/ua.png 2x,
									  https://flagcdn.com/48x36/ua.png 3x"
                                        width="16"
                                        height="12"
                                        alt="Ukraine"></img></a>
                            </li>
                            <li class="nav-item p-1">
                                <a href="404.html"><img
                                        src="https://flagcdn.com/16x12/pl.png"
                                        srcset="https://flagcdn.com/32x24/pl.png 2x,
									  https://flagcdn.com/48x36/pl.png 3x"
                                        width="16"
                                        height="12"
                                        alt="Poland"></img></a>
                            </li>
                            <li class="nav-item p-1">
                                <a href="404.html"><img
                                        src="https://flagcdn.com/16x12/gb.png"
                                        srcset="https://flagcdn.com/32x24/gb.png 2x,
									  https://flagcdn.com/48x36/gb.png 3x"
                                        width="16"
                                        height="12"
                                        alt="EN"></img></a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>

<!--===============================
=            Hero Area            =
================================-->

<section class="hero-area bg-1">
    <!-- Container Start -->
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <!-- Advance Search -->
                <div class="advance-search">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-12 col-md-12 align-content-center">
                                <form>
                                    <div class="form-row">
                                        <div class="form-group col-md-3" >
                                            <select class="w-100 form-control mt-lg-1 mt-md-2" id="categorySelect" >
                                                <option value="0" >Category</option>
                                                <option value="2">Give</option>
                                                <option value="4">Borrow</option>
                                                <option value="1">Drive in to</option>
                                                <option value="3">Help</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <input type="text" class="form-control my-2 my-lg-1" id="inputtext4"
                                                   placeholder="What are you looking for">
                                        </div>
                                        <div class="form-group col-md-3">
                                            <input type="text" class="form-control my-2 my-lg-1" id="inputLocation4"
                                                   placeholder="Location">
                                        </div>
                                        <div class="form-group col-md-2 align-self-center">
                                            <button type="submit" onclick="search(); return false;" class="btn btn-primary">Search Now</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- Container End -->
</section>

<!--===================================
=            Client Slider            =
====================================-->


<!--===========================================
=            Popular deals section            =
============================================-->

<section class="popular-deals section bg-gray">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="section-title">
<!--                    <h2>TODO</h2>-->
<!--                    <p>TODO.</p>-->
                </div>
            </div>
        </div>
        <div class="row">
            <script>
                var map;
                var points;

                var markers = [];

                var LeafIcon = L.Icon.extend({
                    options: {
                        iconSize: [40, 40]
                    }
                });

                var car = new LeafIcon({iconUrl: 'images\\png\\car.png'}),
                    giving = new LeafIcon({iconUrl: 'images\\png\\giving.png'}),
                    help = new LeafIcon({iconUrl: 'images\\png\\help.png'}),
                    loan = new LeafIcon({iconUrl: 'images\\png\\loan.png'});
                
                var options = {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 0
                };

                function success(pos) {
                    var crd = pos.coords;

                    var mapOptions = {
                        center: [crd.latitude, crd.longitude],
                        zoom: 7
                    }

                    map = new L.map('my-map', mapOptions);
                    var layer = new L.TileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
                    map.addLayer(layer);
                    
                    
                    for (var i = 0; i < points.length; i++) {
                        var popupText = `<div style="height: 50px;"><p><span style="font-weight: bold">Description:</span> ${points[i].title}</p> <a style="text-align: right;" href="${points[i].url}">click for more info</a></div>`;
                        
                        var marker = new L.marker([points[i].latitude, points[i].longitude], {icon: getIconById(points[i].icon)}).addTo(map)
                            .bindPopup(popupText);

                        markers.push(marker);
                    }
                }

                function getIconById(iconId) {
                    switch (iconId) {
                        case 1: return car;
                        case 2: return giving;
                        case 3: return help;
                        case 4: return loan;
                        default: return  help;
                    }
                }
                
                
                function error(err) {
                    console.warn(`ERROR(${err.code}): ${err.message}`);
                }

                function loadMapAndPoints() {
                    return new Promise((resolve, reject) => {
                        loadPoints(0);
                        resolve(points);
                    });
                }
                
                function loadPoints(categoryId) {
                    var req = new XMLHttpRequest();
                    req.open('GET', `/map?v=${categoryId}`, false);
                    req.send(null);
                    if (req.status == 200) {
                        points = JSON.parse(req.responseText);
                    }
                }
                
                function search() {
                    for (var i=0; i<markers.length; i++) {
                        map.removeLayer(markers[i]);
                    }

                    var e = document.getElementById("categorySelect");
                    var pointId = 0;
                    
                    if (e.value) {
                        pointId = e.value;
                    }
                    
                    loadPoints(pointId);
                    markers =[];
                    for (var i = 0; i < points.length; i++) {
                        var popupText = `<div style="height: 50px;"><p><span style="font-weight: bold">Description:</span> ${points[i].title}</p> <a style="text-align: right;" href="${points[i].url}">click for more info</a></div>`;

                        var marker = new L.marker([points[i].latitude, points[i].longitude], {icon: getIconById(points[i].icon)}).addTo(map)
                            .bindPopup(popupText);

                        markers.push(marker);
                    }
                }

                loadMapAndPoints()
                    .then(res => {
                        navigator.geolocation.getCurrentPosition(success, error, options);
                    });
            </script>
            <div id="my-map" style="height:500px; width:100%; border:1px solid #DCDCDC;-webkit-box-shadow: 8px 12px 24px -6px rgba(0, 0, 0, 1);-moz-box-shadow: 8px 12px 24px -6px rgba(0, 0, 0, 1); box-shadow: 8px 12px 24px -6px rgba(0, 0, 0, 1);"></div>
            
        </div>
    </div>
</section>


<!--============================
=            Footer            =
=============================-->

<!-- Footer Bottom -->
<footer class="footer-bottom">
    <!-- Container Start -->
    <div class="container">
        <div class="row">
            <div class="col-sm-6 col-12">
                <!-- Copyright -->
                <div class="copyright">
                    <p>Copyright ©
                        <script>
                            var CurrentYear = new Date().getFullYear()
                            document.write(CurrentYear)
                        </script>
                    </p>
                </div>
            </div>
            <div class="col-sm-6 col-12">
                <!-- Social Icons -->
                <ul class="social-media-icons text-right">
                    <li><a class="fa fa-facebook" href="" target="_blank"></a></li>
                    <li><a class="fa fa-twitter" href="" target="_blank"></a></li>
                    <li><a class="fa fa-pinterest-p" href="" target="_blank"></a></li>
                    <li><a class="fa fa-vimeo" href=""></a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Container End -->
    <!-- To Top -->
    <div class="top-to">
        <a id="top" class="" href="#"><i class="fa fa-angle-up"></i></a>
    </div>
</footer>

<!-- JAVASCRIPTS -->
<script src="plugins/jQuery/jquery.min.js"></script>
<script src="plugins/bootstrap/js/popper.min.js"></script>
<script src="plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="plugins/bootstrap/js/bootstrap-slider.js"></script>
<!-- tether js -->
<script src="plugins/tether/js/tether.min.js"></script>
<script src="plugins/raty/jquery.raty-fa.js"></script>
<script src="plugins/slick-carousel/slick/slick.min.js"></script>
<script src="plugins/jquery-nice-select/js/jquery.nice-select.min.js"></script>
<script src="plugins/fancybox/jquery.fancybox.pack.js"></script>
<script src="plugins/smoothscroll/SmoothScroll.min.js"></script>
<!-- google map -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&libraries=places"></script>
<script src="plugins/google-map/gmap.js"></script>
<script src="js/script.js"></script>

</body>

</html>



